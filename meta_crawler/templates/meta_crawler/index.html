{% extends 'base.html' %}

{% block content %}

<form method="get">
  {{ filter.form.as_p }}
  <input type="submit" />
</form>

<div class="grid-x grid-margin-x">
  <div class="cell small-6">
    <table>
      <tr>
        <th>Title</th>
        <th>Name</th>
        <th>Metadata</th>
      </tr>
      {% for meta in metas %}
        <tr>
          <td>{{meta.source}}</td>
          <td>{{meta.title}}</td>
          <td>{{meta.name}}</td>
          <td><a href="javascript:get_meta({{meta.id}})">See data</a></td>
        </tr>
      {% empty %}
        <tr>
          <td>No data found</td>
        </tr>
      {% endfor %}
    </table>
  </div>
  <div class="cell small-6">
    <div id="meta">
      Please click on element on the left to see its meta data:
    </div>
  </div>
</div>



{% endblock %}

{% block scripts %}
{% block javascript %}
  <script>
    function get_meta(meta_id) {
      $.ajax({
        url: '{% url 'meta_crawler:meta' %}',
        data: {
          'meta_id': meta_id
        },
        success: function (data) {
            $('#meta').html(data)
        }
      });

    };
  </script>
{% endblock %}

{% endblock %}